import{_ as i,c as a,a as e,o as n}from"./app-AuyBpmKP.js";const l={};function t(h,s){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="mkdocs踩坑记录" tabindex="-1"><a class="header-anchor" href="#mkdocs踩坑记录"><span>MkDocs踩坑记录</span></a></h1><h2 id="latex" tabindex="-1"><a class="header-anchor" href="#latex"><span>Latex</span></a></h2><p><a href="https://wdk-docs.github.io/mkdocs-material-docs/reference/mathjax/" target="_blank" rel="noopener noreferrer">MathJax(数学) - Material for MkDocs (wdk-docs.github.io)</a></p><p>添加脚本到<code>docs/javascripts/mathjax.js</code></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">window</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">MathJax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  tex</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    inlineMath</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\\\</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\\\</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]],</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    displayMath</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\\\</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\\\</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]],</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    processEscapes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    processEnvironments</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  },</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  options</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ignoreHtmlClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.*|</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    processHtmlClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">arithmatex</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  },</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">document$</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">subscribe</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  MathJax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">typesetPromise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加配置</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">markdown_extensions</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> pymdownx.arithmatex</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      generic</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">extra_javascript</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> javascripts/mathjax.js</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://polyfill.io/v3/polyfill.min.js?features=es6</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="多层次列表" tabindex="-1"><a class="header-anchor" href="#多层次列表"><span>多层次列表</span></a></h2><p>多层次列表(<code>-</code> <code>1.</code>)无法正确显示</p><p>需要添加</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">markdown_extensions</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mdx_truly_sane_lists</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 多级列表</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="不支持-c-格式的代码块" tabindex="-1"><a class="header-anchor" href="#不支持-c-格式的代码块"><span>不支持\`\`\`\`c\`格式的代码块</span></a></h2><blockquote><p><a href="https://squidfunk.github.io/mkdocs-material/reference/code-blocks/" target="_blank" rel="noopener noreferrer">Code blocks - Material for MkDocs (squidfunk.github.io)</a></p></blockquote><p>添加</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">markdown_extensions</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> pymdownx.highlight</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 代码块语法高亮</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      anchor_linenums</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 启用行号</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      line_spans</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> __span</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 自定义行范围</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      pygments_lang_class</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 使用语言类名</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pymdownx.inlinehilite</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 行内代码高亮</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pymdownx.tilde</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #删除线</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pymdownx.snippets</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #代码片段, 没用过, 抄的配置</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pymdownx.superfences</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #代码块增强</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="img-格式图片引用出错" tabindex="-1"><a class="header-anchor" href="#img-格式图片引用出错"><span><code>&lt;img&gt;</code>格式图片引用出错</span></a></h2><p>在平时写 markdown 时, 添加的截图经常会使用 typora 的右键进行缩放, 实际上是使用<code>&lt;img&gt;</code>标签来引用图片</p><p>这在 typora 和 vscode 中一切正常, 但是在用 mkdocs 部署时无法正确地引用到该图片</p><h3 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h3><h4 id="测试文本" tabindex="-1"><a class="header-anchor" href="#测试文本"><span>测试文本</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>## 测试</span></span>
<span class="line"><span>### 绝对路径</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;img src=&quot;/test/test.assets/image-20240403162141023.png&quot; alt=&quot;image-20231104201701127&quot; style=&quot;zoom: 50%;&quot; /&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### 相对路径</span></span>
<span class="line"><span>#### \`![]()\`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>![image](image.png)</span></span>
<span class="line"><span>![image](./image.png)</span></span>
<span class="line"><span>![7408](./test.assets/image-20240403162141023.png)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### img 空</span></span>
<span class="line"><span>- &lt;img src=&quot;test.assets/image-20240403162141023.png&quot; alt=&quot;image-20220907225416746&quot; style=&quot;zoom:33%;&quot; /&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### img \`./\`</span></span>
<span class="line"><span>- &lt;img src=&quot;./test.assets/image-20240403162141023.png&quot; alt=&quot;image-20220907225416746&quot; style=&quot;zoom:33%;&quot; /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image.png</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.assets</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image-20231104201701127.png</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image-20240403162141023.png</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> testBlog.md</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="测试结果" tabindex="-1"><a class="header-anchor" href="#测试结果"><span>测试结果</span></a></h4><blockquote><p><a href="https://stackoverflow.com/questions/71074662/configuring-image-filepaths-correctly-in-mkdocs/71083184#71083184" target="_blank" rel="noopener noreferrer">markdown - configuring image filepaths correctly in mkdocs - Stack Overflow</a></p><p><a href="https://hellowac.github.io/mkdocs-docs-zh/user-guide/configuration/#use_directory_urls" target="_blank" rel="noopener noreferrer">配置文件 - MkDocs 中文文档 (hellowac.github.io)</a></p></blockquote><ol><li><p>在浏览器中访问图片路径(<code>/test/test.assets/image-20240403162141023.png</code>)可以正常显示, 所以是引用出现问题</p></li><li><p>通过查看报错信息可知</p><ul><li><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">WARNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  [16:49:47] </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET /test/testBlog/test.assets/image-20240403162141023.png HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  code 404</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>图片路径被错误地加上了<code>/testBlog</code></p></li></ul></li></ol><h3 id="错误分析" tabindex="-1"><a class="header-anchor" href="#错误分析"><span>错误分析</span></a></h3><blockquote><p>参考<a href="https://stackoverflow.com/questions/71074662/configuring-image-filepaths-correctly-in-mkdocs/71083184#71083184" target="_blank" rel="noopener noreferrer">StackOverflow 的回答</a></p></blockquote><blockquote><p><a href="https://www.mkdocs.org/user-guide/writing-your-docs/#linking-from-raw-html" target="_blank" rel="noopener noreferrer">官方文档</a>:</p><p>Markdown 允许文档作者在 Markdown 语法无法满足作者需求时，回退到原始 HTML。MkDocs 在这方面并不限制 Markdown。然而，由于所有原始 HTML 都被 Markdown 解析器忽略，MkDocs<strong>无法验证或转换包含在原始 HTML 中的链接(在这里就是我们图片链接)</strong>。当你在原始 HTML 中包含内部链接时，你需要手动将链接适当地格式化以适应渲染后的文档。</p></blockquote><p>对于我上面的 testBlog, 生成的 url 为<code>https://.../test/testBlog/</code> 这时, 这个 md 文件被视为一个目录</p><p>对于文档中<code>&lt;img src=&quot;test.assets/image-20240403162141023.png&quot; alt=&quot;image-20220907225416746&quot; style=&quot;zoom:33%;&quot; /&gt;</code>这一标签, 浏览器会去访问同一目录(<code>test/testBlog/</code>)下的图片(<code>test/testBlog/test.assets/image-20240403162141023.png</code>)</p><p>然而, 这个图片的实际路径并没有<code>/testBlog</code></p><h3 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h3><blockquote><p>同样参考<a href="https://stackoverflow.com/questions/71074662/configuring-image-filepaths-correctly-in-mkdocs/71083184#71083184" target="_blank" rel="noopener noreferrer">StackOverflow 的回答</a></p></blockquote><p>因为<code>testBlog.md</code>被转换为了一个目录, 这时候只需要让它不被转换</p><p>大佬给了一个配置项: <a href="https://hellowac.github.io/mkdocs-docs-zh/user-guide/configuration/#use_directory_urls" target="_blank" rel="noopener noreferrer">use_directory_urls</a> 该配置项会让<code>testBlog.md</code>展示为<code>/testBlog.html</code>文件而非<code>/testBlog</code></p><h3 id="后记" tabindex="-1"><a class="header-anchor" href="#后记"><span>后记</span></a></h3><ol><li>不要熬夜改 bug, 会变得神志不清</li><li>早该上 StackoverFlow 搜的 QAQ</li></ol><h2 id="博客-blog-posts-引用图片资源出错" tabindex="-1"><a class="header-anchor" href="#博客-blog-posts-引用图片资源出错"><span>博客(blog/posts)引用图片资源出错</span></a></h2><h3 id="问题描述" tabindex="-1"><a class="header-anchor" href="#问题描述"><span>问题描述</span></a></h3><p>在presentation.md中, 我为了节约空间, 引用了fzu_cs_course/毕业设计/FZU-SINTEF-Beamer-Template.assets/preview_page-0001.jpg等图片 文件树如下</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>docs</span></span>
<span class="line"><span>├── blog</span></span>
<span class="line"><span>│   ├── index.md</span></span>
<span class="line"><span>│   └── posts</span></span>
<span class="line"><span>│       └── presentation.md</span></span>
<span class="line"><span>└── fzu_cs_course</span></span>
<span class="line"><span>    └── 毕业设计</span></span>
<span class="line"><span>        └── FZU-SINTEF-Beamer-Template.assets</span></span>
<span class="line"><span>            ├── preview_page-0001.jpg</span></span>
<span class="line"><span>            └── ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在presentation.md使用的相对路径引用为<code>../../fzu_cs_course/毕业设计/FZU-SINTEF-Beamer-Template.assets/preview_page-0001.jpg</code> 但是部署到服务器后, 图片无法显示</p><h3 id="分析" tabindex="-1"><a class="header-anchor" href="#分析"><span>分析</span></a></h3><p>检查编译出的<code>site/blog</code>可以发现文件夹结构发生了改变</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>site</span></span>
<span class="line"><span>├── blog</span></span>
<span class="line"><span>│   └── presentation.html # 没有posts文件夹了</span></span>
<span class="line"><span>└── fzu_cs_course</span></span>
<span class="line"><span>    └── 毕业设计</span></span>
<span class="line"><span>        └── FZU-SINTEF-Beamer-Template.assets</span></span>
<span class="line"><span>            ├── preview_page-0001.jpg</span></span>
<span class="line"><span>            └── ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最终导致了相对路径解析出错</p><h3 id="解决方案-1" tabindex="-1"><a class="header-anchor" href="#解决方案-1"><span>解决方案</span></a></h3><p>用onerror事件来处理, 在解析错误时更换为正确的相对路径</p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-html"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">img</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">../../fzu_cs_course/毕业设计/FZU-SINTEF-Beamer-Template.assets/preview_page-0001.jpg</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  alt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Beamer Template Preview Page 1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  width</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">45%</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  onerror</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">onerror</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">../fzu_cs_course/毕业设计/FZU-SINTEF-Beamer-Template.assets/preview_page-0001.jpg</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="blog-配置" tabindex="-1"><a class="header-anchor" href="#blog-配置"><span>Blog 配置</span></a></h2><p><a href="https://shafish.cn/blog/mkdocs/#14-blog" target="_blank" rel="noopener noreferrer">Mkdocs Material 使用记录 - shafish.cn</a></p>`,51)])])}const d=i(l,[["render",t]]),k=JSON.parse('{"path":"/blog/eaq3vgce/","title":"mkdocs踩坑记录","lang":"zh-CN","frontmatter":{"date":{"created":"2024-04-04T00:00:00.000Z","updated":"2024-04-04T00:00:00.000Z"},"categories":["踩坑记录"],"comments":true,"title":"mkdocs踩坑记录","createTime":"2024/06/30 18:34:21","permalink":"/blog/eaq3vgce/"},"readingTime":{"minutes":3.42,"words":1025},"git":{"createdTime":1712233110000,"updatedTime":1764835811000,"contributors":[{"name":"yJader_r9p","username":"","email":"yj1425840290@gmail.com","commits":2,"avatar":"https://gravatar.com/avatar/d114b38a3a1c3bc953fd1edf640e4ea41ad9e03ff609b52a5d7ee42d8d8da8d4?d=retro"},{"name":"yJader_xx","username":"","email":"yj1425840290@gmail.com","commits":1,"avatar":"https://gravatar.com/avatar/d114b38a3a1c3bc953fd1edf640e4ea41ad9e03ff609b52a5d7ee42d8d8da8d4?d=retro"},{"name":"yJader@mba","username":"","email":"yjader@foxmail.com","commits":3,"avatar":"https://gravatar.com/avatar/92def0cdfefbca5d6297bdc419bf36d1d3e6f7ea47c613f809dff655a7536adb?d=retro"}]},"filePathRelative":"blog/posts/mkdocs踩坑记录.md","headers":[],"categoryList":[]}');export{d as comp,k as data};
